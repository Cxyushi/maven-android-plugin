#summary a couple of conventions for contributors

= Introduction =

In the following are a couple of conventions we try to adhere to make things easier and better.

= Configuration parameters =

*As of 2012-03-12 this approach is outdated. Stay tuned for an update to this wiki page and otherwise refer to ConfigHandler and the example implementation in ProguardMojo.*

This sections deals with our approach to configuration parameters.

The following approach is slowly being implemented for the 3.0.0 release to allow for a useful and consistent plugin documentation via the Maven site plugin as well as in the javadoc and providing a relatively clean configuration in the pom or settings file as well as via the command line.

I am going to explain this with the !RunMojo as an example. 

Each mojo should have a configuration object in com.jayway.maven.plugins.android.configuration and named like the goal ideally.

This object is a pojo with setters. See the Run class.

This object is then used as a @parameter in the mojo (!RunMojo).

Each pojo attribute has to have a mirror in the mojo named with the goal prepended and a parameter expression of android.goalname.parametername. So it would look like this simplified.

{{{
/**
 * @parameter
 */
private Run run;

/**
 * @parameter expression="${android.run.debug}" default-value="false"
 */
protected boolean runDebug;
}}}

Each mojo then has to implement parsing of the Run instance to take value from there if not null and otherwise you the direct parameter.

Documentation for the configuration should be with the parameter in the mojo.

So what do we achieve with this:

  * configuration in the pom or settings file as part of the plugin configuration is possible like so
{{{
<configuration>
  <run>
    <debug>true</debug>
  </run>
</configuration>
}}}
  * properties can be used pom or settings file like so
{{{
<properties>
    <run.debug>true</run.debug>
</properties>
}}}

  * command-line with parameter can be used as -Dandroid.run.debug

  * the plugin documentation as produced with the site plugin has the configuration for the run goal together since run and runDebug all together when alphabetical sorting applies.. 